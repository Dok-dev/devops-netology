# Домашнее задание «5.2. Системы управления виртуализацией»

## Задание 1 

Выберете подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований  
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий    
**Ответ:**    
Microsoft Hyper-V, т.к. поддерживаются все необходимые опции, а так же обеспечивается хорошая совместимость с Windows based инфраструктурой.
Однако с тем же успехом можно использовать и коммерческую версию VMWare, тут уже нужно считать стоимость лицензирования.

- Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин    
**Ответ:**    
KVM, т.к. opensource и отличная производительность.

- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры    
**Ответ:**    
Microsoft Hyper-V, без GUI он бесплатен и обеспечивает хорошую совместимость и быстродействие с Windows.

- Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux    
**Ответ:**    
Бесплатные версии VMWare или Oracle VM VirtualBox, т.к. быстрое развертывание, а требования минимальны.

---

## Задание 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.

**Ответ:**    
В настоящее время есть два штатных способа преобразования виртуальных машин VMWare в узлы Hyper-V:    
- Мастер преобразования виртуальных машин. Этот мастер можно использовать в консоли VMM. Этот метод имеет ряд ограничений.
- Microsoft Virtual Machine Converter. Это автономное средство преобразует виртуальные машины VMware в узлы Hyper-V или виртуальные машины Azure. Оно также преобразует физические компьютеры и диски в узлы Hyper-V.

Так же есть сторонние решения, например StarWind V2V Converter:    
1. Удаляем из виртуальной машины VMWare Tools и выключаем машину.    
2. Воспользуемся бесплатной утилитой StarWind V2V Converter и преобразуем файл с расширением vmdk в формат Hyper-V (vhd).    
3. Разместим его в хранилище виртуальных дисков Hyper-V (c:\ClusterStorage\Volume1\Virtual Hard Disks).    
4. Создадим новую виртуальную машину Hyper-V первого поколения и в опциях выбора жесткого диска укажем на сконвертированный файл.    
5. Настройка ресурсов и режимов старта.    
6. Запуск, проверка, остановка.    
7. Конвертируем образ диска штатным средством в актуальную версию Hyper-V 3.0 (VHDX). Правой клавишей на диск - преобразовать. По окончании еще раз выбрать уже новую версию диска в настройках машины. 
---

## Задание 3 

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами. 

**Ответ:**    
Сложность миграции из одной среды в другую, невозможность автоматической репликации между средами, усложнение мониторинга и администрирования.    
Выбор зависит от задач и финансирования, но в целом выбирал бы при возможности одну среду.

Например перенос виртуальных машин при необходимости с сервера с одним гипервизором на другой со вторым потребует дополнительного времени на конвертацию VM.    
Или внезапная необходимость масштабирования образов при нехватке ресурсов на физических машинах с разными гипервизорами может вызвать задержки на преобразование или создание новых машин.    
Гетерогенная среда может быть оправданна лишь необходимость быстро разворачивать машины от разных поставщиков, с разными системами виртуализации либо финансовыми соображениями в текущий момент.    
